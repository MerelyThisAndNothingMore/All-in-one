---
tags: 
alias:
- Thread Synchronization
---
线程同步是一种机制，允许多个线程在特定的时间点进行协调，通常是为了防止对共享资源的同时访问。
# 实现方式
## 互斥量（Mutex）
- **定义**: 一个用于保护共享资源的同步原语。当一个线程持有互斥量时，其他线程无法进入与之相关的临界区。
- **使用场景**: 当需要保护的代码段只能在某一时刻被一个线程访问时。
- **问题**: 如果不正确地使用，可能导致[[死锁]]。
## 信号量（Semaphores）
- **定义**: 一个用于控制多个线程对共享资源的访问的同步原语。它维护一个计数器，表示可用资源的数量。
- **使用场景**: 当需要限制对共享资源并发访问的线程数时。
- **问题**: 与互斥量相似，不当使用可能导致死锁或资源竞争。

## 条件变量（Condition Variables）
  - **定义**: 允许线程等待某个条件成为真的同步原语。
 - **使用场景**: 当一个线程需要等待某个特定条件（通常与共享资源的状态有关）满足时，它可以使用条件变量进入睡眠状态，并在条件满足时被唤醒。
 - **问题**: 如果唤醒机制不当，可能导致信号丢失或假唤醒。
## 读写锁（Read-Write Locks）**
 - **定义**: 允许多个线程同时读共享资源，但在任何时刻只允许一个线程写。
 - **使用场景**: 适用于读取操作远多于写入操作的场景，因为它可以允许多个读取操作并发执行。
- **问题**: 不当的使用可能导致写入线程饥饿。
## 自旋锁（Spinlocks）
 **定义**: 当线程尝试获取锁而锁已被其他线程持有时，线程不会被阻塞，而是会忙等待（即循环检查锁是否可用，不释放CPU）。
- **使用场景**: 适用于锁被持有的时间非常短的场景。
- **问题**: 在锁被持有时间较长的场景中，自旋锁可能导致大量的CPU资源浪费。
## 屏障（Barriers）

- **定义**: 允许多个线程在某个点同步的同步原语
- **使用场景**: 当需要确保所有线程都达到某个执行点后才能继续执行时。
## 原子操作（Atomic Operations）
  
 - **定义**: 一组不可分割的操作，它们保证在执行过程中不会被其他线程中断。
 - **使用场景**: 当需要对共享资源进行简单的操作，如递增或比较并交换，并且不想使用锁时。