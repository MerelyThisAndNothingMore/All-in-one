---
tags: 
aliases:
  - NAT Traversal
---

## 定义

内网穿透（NAT Traversal）是一种技术，允许位于私有网络（内网）中的设备通过网络地址转换（NAT）设备与外部网络（公网）进行通信。它解决了内网设备无法直接被公网访问的问题。

### 特点

- **突破NAT限制**：内网穿透技术可以绕过NAT设备，使内网设备能够与公网设备进行通信。
- **提高访问性**：内网设备可以通过内网穿透技术被外部网络访问，适用于远程控制、文件共享等场景。
- **多种实现方式**：常见的内网穿透技术包括端口映射、UPnP、STUN、TURN和VPN等。

### 相似概念辨析

- **端口映射（Port Forwarding）**：在路由器上配置，将特定的外部端口映射到内网设备的端口，使外部设备可以通过该端口访问内网设备。
- **UPnP（通用即插即用）**：一种协议，允许设备自动配置路由器的端口映射，简化了内网穿透的配置过程。
- **STUN（会话穿透实用程序）**：一种协议，帮助内网设备发现自己的公网IP地址和端口，用于P2P通信。
- **TURN（中继穿透）**：一种协议，通过中继服务器转发数据，解决NAT穿透问题，适用于复杂网络环境。
- **VPN（虚拟专用网络）**：通过加密隧道将内网设备连接到外部网络，实现内网穿透和安全通信。

## 原理

内网穿透技术通常通过以下步骤实现：
1. **发现公网IP和端口**：内网设备通过STUN服务器获取自己的公网IP地址和端口。
2. **建立连接**：内网设备通过NAT设备与外部服务器或设备建立连接。
3. **数据转发**：数据通过NAT设备和中继服务器进行转发，实现内网设备与外部设备的通信。

## 使用

内网穿透技术广泛用于以下场景：
- **远程控制**：通过内网穿透技术，用户可以远程访问和控制内网设备，如家庭摄像头、NAS等。
- **文件共享**：内网设备可以通过内网穿透技术与外部设备共享文件和数据。
- **在线游戏**：内网穿透技术用于P2P游戏连接，减少延迟和提高游戏体验。
- **视频会议**：通过内网穿透技术，内网设备可以参与视频会议，实现实时通信。

## Q & A

**Q: 内网穿透和端口映射有什么区别？**
A: 内网穿透是一种广义的技术，包含多种实现方式，而端口映射是其中的一种具体实现方式。

**Q: 内网穿透技术是否安全？**
A: 内网穿透技术本身并不提供安全保障，建议结合VPN、加密等技术提高通信安全性。

**Q: 如何实现内网穿透？**
A: 可以使用开源工具（如frp、ngrok）或配置路由器的端口映射、UPnP等功能实现内网穿透。
