---
aliases:
  - Cache Coherence
tags:
  - computerArchitecture
---

如果一个变量在多个CPU中都存在缓存（一般在多线程编程时才会出现），那么就可能存在缓存不一致的问题。

在多路处理器系统中，每 个处理器都有自己的高速缓存，而它们又共享同一主内存(Main Memory)，这种系统称为共享内存 多核系统(Shared Memory Multiprocessors System)当多个处理器的运算任务都涉及 同一块主内存区域时，将可能导致各自的缓存数据不一致。



# 解决方案
## 通过在总线加LOCK#锁的方式

## 通过缓存一致性协议

[[CPU]]写数据时，如果发现操作的变量是共享变量，即在其他CPU中也存在该变量的副本，会发出信号通知其他CPU将该变量的缓存行置为无效状态，因此当其他CPU需要读取这个变量时，发现自己缓存中缓存该变量的缓存行是无效的，那么它就会从内存重新读取。