---
tags: 
aliases:
  - Stack Allocations
---

在[[Java 虚拟机]]中，[[Java 堆]]上分配创建[[对象]]的内存空间几乎是[[Java]]程序员都知道的常识，Java堆中的对象对于各个[[线程]]都是共享和可见的，只要持有这个对象的引用，就可以访问到堆中存储的对象数据。虚拟机的垃圾收集子系统会回收堆中不再使用的对象，但回收动作无论是标记筛选出可回收对象，还是回收和整理内存，都需要耗费大量资源。如果确定一个对象不会逃逸出线程之外，那让这个对象在栈上分配[[内存]]将会是一个很不错的主意，对象所占用的内存空间就可以随[[Java 运行时栈帧|栈帧]]出栈而销毁。在一般应用中，完全不会逃逸的局部对象和不会逃逸出线程的对象所占的比例是很大的，如果能使用栈上分配，那大量的对象就会随着[[方法]]的结束而自动销毁了，垃圾收集子系统的压力将会下降很多。栈上分配可以支持方法逃逸，但不能支持线程逃逸。

