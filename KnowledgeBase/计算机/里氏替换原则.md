---
tags:
  - softwareEngineering
aliases:
  - Liskov Substitution Principle
  - LSP
---

### 定义
里氏替换原则（Liskov Substitution Principle, LSP）是面向对象设计中的一项基本原则，由Barbara Liskov在1987年提出。它指出，**子类对象必须能够替换其基类对象，并且程序的行为不会发生变化**。换句话说，**在使用基类对象的地方都可以使用子类对象**。

### 特点
- **继承性**：子类继承基类的所有特性和行为。
- **替换性**：子类对象可以替换基类对象，程序的功能和行为不受影响。
- **一致性**：子类在扩展基类功能时，不应改变基类原有的行为。

### 相似概念辨析
- **开闭原则（OCP）**：软件实体（类、模块、函数等）应该对扩展开放，对修改关闭。LSP是OCP的具体实现之一。
- **依赖倒置原则（DIP）**：高层模块不应该依赖低层模块，二者都应该依赖其抽象。LSP强调的是子类与基类之间的关系，而DIP强调的是模块之间的依赖关系。

### 原理
里氏替换原则的核心是**保证子类的行为与基类一致**。这意味着子类在重写基类方法时，不能改变方法的预期行为。具体来说：
1. **方法签名一致**：子类重写的方法必须与基类方法具有相同的参数和返回类型。
2. **行为一致**：子类重写的方法不能违反基类方法的预期行为。
3. **前置条件不变或放宽**：子类方法的前置条件（如方法参数的有效性）不能比基类方法更严格。
4. **后置条件不变或加强**：子类方法的后置条件（如方法返回值的有效性）不能比基类方法更宽松。

### 使用
里氏替换原则在实际开发中有助于提高代码的可维护性和可扩展性。以下是一个简单的例子：

```java
// 基类
public class Bird {
    public void fly() {
        System.out.println("Bird is flying");
    }
}

// 子类
public class Sparrow extends Bird {
    @Override
    public void fly() {
        System.out.println("Sparrow is flying");
    }
}

// 使用基类和子类
public class Main {
    public static void main(String[] args) {
        Bird bird = new Sparrow();
        bird.fly();  // 输出: Sparrow is flying
    }
}
```

在这个例子中，`Sparrow`类继承了`Bird`类，并重写了`fly`方法。根据里氏替换原则，`Sparrow`对象可以替换`Bird`对象，程序的行为不会发生变化。

### Q & A
**Q: 里氏替换原则的主要作用是什么？**
A: 里氏替换原则的主要作用是确保子类可以替换基类，从而提高代码的可维护性和可扩展性。

**Q: 如何判断一个类是否违反了里氏替换原则？**
A: 可以通过检查子类是否改变了基类方法的预期行为、前置条件和后置条件来判断是否违反了里氏替换原则。

**Q: 里氏替换原则与多态有什么关系？**
A: 里氏替换原则是实现多态的基础。通过遵循里氏替换原则，可以确保子类对象可以替换基类对象，从而实现多态。