---
tags: 
alias:
---

![[Pasted image 20240204151017.png]]

Java 内存模型的主要目的是定义程序中各种变量的访问规则，即关注在虚拟机中把变量值存储到 内存和从[[内存]]中取出变量值这样的底层细节。此处的变量(Variables)与[[Java]]编程中所说的变量有所区别，它包括了实例字段、静态字段和构成[[数组]]对象的元素，但是不包括局部变量与[[方法]]参数，因为后者是线程私有的，不会被共享，自然就不会存在竞争问题。

Java内存模型规定了所有的变量都存储在[[主内存]]中(此处的主内存与介绍物理 硬件时提到的主内存名字一样，两者也可以类比，但物理上它仅是虚拟机内存的一部分)。每条线程还有自己的工作内存(Working Memory ，可与前面讲的处理器高速[[缓存]]类比)，线程的工作内存中保存了被该线程使用的变量的主内存副本，线程对变量的所有操作(读取、赋值等)都必须在工作内存中进行，而不能直接读写主内存中的数据。不同的线程之间也无法直接访问对方工作内存中的变量，线程间变量值的传递均需要通过主内存来完成


