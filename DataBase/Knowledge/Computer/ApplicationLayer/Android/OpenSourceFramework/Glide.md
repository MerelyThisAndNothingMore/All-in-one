---
tags: 
alias:
---

# LruCache的原理是什么
LruCache的实现需要两个数据结构:双向链表和哈希表。 双向链表用于记录元素被塞进cache的顺序，然后淘汰最久未使用的元素。 哈希表用于直接记录元素的位置，即用O(1)的时间复杂度拿到链表的元素。

get的操作逻辑:根据传入的key(图片url的MD5值)去哈希表里拿到对应的元素，如果元素存在，就把元素挪到链表的尾部。 put的操作逻辑:首先判断key是否在哈希表里面，如果在的话就去更新值，并把元素挪到链表的尾部。

如果不在哈希表里，说明是一个新的元素。这时候需要去判断此时cache的容量了， 如果超过了最大的容量，就淘汰链表头部的元素，再将新的元素插入链表的尾部，如果没有超过最大容量， 直接在链表尾部追加新的元素。

为啥要用linkedHashMap的数据结构?? HashMap是无序的，当我们希望有顺序地去存储key-value时，就需 要使用LinkedHashMap了.

